<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>BareMail &mdash; BareMail 0.1 documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="BareMail 0.1 documentation" href="#" />
    <link rel="next" title="src" href="modules.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="modules.html" title="src"
             accesskey="N">next</a> |</li>
        <li><a href="#">BareMail 0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="baremail">
<h1>BareMail<a class="headerlink" href="#baremail" title="Permalink to this headline">¶</a></h1>
</div>
<div class="section" id="a-pure-python-email-service">
<h1>A Pure Python Email Service<a class="headerlink" href="#a-pure-python-email-service" title="Permalink to this headline">¶</a></h1>
<p>BareMail implements functional email servers for the POP3 and SMTP protocols.
Using a minimum of system resources it provides the function of a mail submission
agent, mail transfer agent, and mail delivery agent for a local system.
It can run from its source directory without modification or configuration.
The source is pure Python using only the standard libraries. No external packages are required.</p>
<div class="section" id="rationale">
<h2>Rationale<a class="headerlink" href="#rationale" title="Permalink to this headline">¶</a></h2>
<p>Many long running services and daemons present on desktop and server machines use email to
notify the administrator of critical events.  The majority of desktop users and casual system
administrators don&#8217;t take advantage of this capability to monitor the health of the systems
under their control.  Either the mail messages are discarded silently or they sit collecting
virtual dust in the local mail spool.  Here, listed in no particular order, are some of the
reasons for this state of affairs:</p>
<ul class="simple">
<li>Getting sendmail (or its functional equivalent) working is non-trivial.</li>
<li>The daemon doesn&#8217;t support the security features required to directly submit email to the server.</li>
<li>The daemon doesn&#8217;t support any other port that the standard SMTP port 25.</li>
<li>There are concerns about having email credentials stored in plain text for each daemon&#8217;s configuration file.</li>
<li>There are no easy ways to get most email clients to look in a local mail spool.</li>
</ul>
<p>BareMail solves this problem by requiring no little or no setup itself and by allowing
the daemon&#8217;s email parameters to be very forgiving.  It accomplishes this by throwing away any
and all sense of security and doing away with individual accounts.  The name BareMail
comes from being &#8220;naked&#8221; to the world in terms of security and from being the bare minimum
of functionality to accomplish the task.</p>
<p>On either the POP3 or SMTP interface, BareMail will accept <strong>any</strong> user name and password.  As
a matter of fact, it will quite happily render service with no login at all.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">BareMail provides <strong>NO SECURITY</strong> whatsoever.  The SMTP and POP3 ports
should never be opened on an interface attached to any untrusted network.
It is intended to run behind a firewall and serve either a single machine on
the <tt class="docutils literal"><span class="pre">localhost</span></tt> interface or be exposed to a LAN shared only by trusted users.</p>
</div>
</div>
<div class="section" id="what-it-does">
<h2>What It Does<a class="headerlink" href="#what-it-does" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Accepts email submissions on the SMTP port</li>
<li>Stores email in a maildir folder</li>
<li>Serves those emails to POP3 clients</li>
</ul>
</div>
<div class="section" id="what-it-doesn-t">
<h2>What It Doesn&#8217;t<a class="headerlink" href="#what-it-doesn-t" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Provide individual email accounts</li>
<li>Have any security features.  Anyone can submit or retreive email.</li>
<li>Perform more than minimal checking to verify the structure of the submitted emails.</li>
</ul>
</div>
<div class="section" id="lesser-warnings">
<h2>Lesser Warnings<a class="headerlink" href="#lesser-warnings" title="Permalink to this headline">¶</a></h2>
<p>The developer is an embedded systems engineer not a Pythonista.  You won&#8217;t find any list comprehension or
decorators within.</p>
<p>This is alpha code.  There is a great deal of todo to be done.</p>
<p>This code is tested and run on an Ubuntu base system using the Thunderbird client.  A broader
test base is needed.</p>
</div>
<div class="section" id="running">
<h2>Running<a class="headerlink" href="#running" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt>Clone or unzip the repository to a local directory.  Change directory to the baremail directory and run:</dt>
<dd>src/baremail.py ../config/high_port.json</dd>
</dl>
<p>This will open servers available only to localhost at ports 2025 for SMTP and 2110 for POP3.</p>
<dl class="docutils">
<dt>Alternatively you can run BareMail using sudo to open the standard ports:</dt>
<dd>sudo src/baremail.py ../config/standard_port.json</dd>
</dl>
<p>After opening ports 25 and 587 for SMTP and opening 110 for POP3, BareMail will drop root privileges
and continue to run as the original user.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">BareMail will not run directly from the root account.</p>
</div>
<p>To access BareMail over a LAN, copy one of the configuration files and modify the &#8216;host&#8217; parameters
in the network settings to the name of the machine on which it&#8217;s running.  Each of the servers can be
configured individually so it&#8217;s possible to have SMTP listen on a LAN interface but have POP3 only
available to localhost.
At this time, BareMail runs in the foreground attached to a terminal.  Proper
daemonification is high on the todo list.</p>
</div>
<div class="section" id="an-alternative-to-baremail">
<h2>An Alternative to BareMail<a class="headerlink" href="#an-alternative-to-baremail" title="Permalink to this headline">¶</a></h2>
<p>For a fully functional and secure email system, the combination of Dovecot and DragonFly Mail Agent is
easily installable on most distributions and both servers have good support from the community.  Both
have relatively small memory footprints and are not CPU intensive.  These servers can be exposed to
the Internet with as much safety as can be expected in today&#8217;s high threat world.
Configuration requires more knowlege of the details of POP3 and SMTP but should be doable for anyone
with a bit of patience and perserverance.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Dragonfly does not listen for connections on the SMPT port 25.  This may be a problem for
older daemons that expect the submit email at this port.</p>
</div>
<ul class="simple">
<li><a class="reference external" href="http://dovecot.org/">http://dovecot.org/</a></li>
<li><a class="reference external" href="https://github.com/corecode/dma#dma----dragonfly-mail-agent">https://github.com/corecode/dma#dma&#8212;-dragonfly-mail-agent</a></li>
</ul>
</div>
<div class="section" id="source-documentation">
<h2>Source Documentation<a class="headerlink" href="#source-documentation" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference internal" href="genindex.html"><em>Index</em></a></li>
<li><a class="reference internal" href="py-modindex.html"><em>Module Index</em></a></li>
<li><a class="reference internal" href="search.html"><em>Search Page</em></a></li>
</ul>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="modules.html">src</a><ul>
<li class="toctree-l2"><a class="reference internal" href="baremail.html">baremail module</a></li>
<li class="toctree-l2"><a class="reference internal" href="baremail_pop3.html">baremail_pop3 module</a></li>
<li class="toctree-l2"><a class="reference internal" href="baremail_smtp.html">baremail_smtp module</a></li>
</ul>
</li>
</ul>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="#">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">BareMail</a></li>
<li><a class="reference internal" href="#a-pure-python-email-service">A Pure Python Email Service</a><ul>
<li><a class="reference internal" href="#rationale">Rationale</a></li>
<li><a class="reference internal" href="#what-it-does">What It Does</a></li>
<li><a class="reference internal" href="#what-it-doesn-t">What It Doesn&#8217;t</a></li>
<li><a class="reference internal" href="#lesser-warnings">Lesser Warnings</a></li>
<li><a class="reference internal" href="#running">Running</a></li>
<li><a class="reference internal" href="#an-alternative-to-baremail">An Alternative to BareMail</a></li>
<li><a class="reference internal" href="#source-documentation">Source Documentation</a></li>
</ul>
</li>
</ul>

  <h4>Next topic</h4>
  <p class="topless"><a href="modules.html"
                        title="next chapter">src</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/index.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="modules.html" title="src"
             >next</a> |</li>
        <li><a href="#">BareMail 0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2016, Samara Real-Time, Inc..
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.2.
    </div>
  </body>
</html>